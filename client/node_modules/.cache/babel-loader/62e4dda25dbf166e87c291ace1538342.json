{"ast":null,"code":"\"use strict\";\n/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TaskQueue = void 0;\n\nclass TaskQueue {\n  constructor() {\n    this._chain = Promise.resolve();\n  }\n\n  postTask(task) {\n    const result = this._chain.then(task);\n\n    this._chain = result.then(() => undefined, () => undefined);\n    return result;\n  }\n\n}\n\nexports.TaskQueue = TaskQueue;","map":{"version":3,"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;;AAgBA,MAAaA,SAAb,CAAsB;AAGpBC;AACE,SAAKC,MAAL,GAAcC,OAAO,CAACC,OAAR,EAAd;AACD;;AAEDC,UAAQ,CAAIC,IAAJ,EAA0B;AAChC,UAAMC,MAAM,GAAG,KAAKL,MAAL,CAAYM,IAAZ,CAAiBF,IAAjB,CAAf;;AACA,SAAKJ,MAAL,GAAcK,MAAM,CAACC,IAAP,CACZ,MAAMC,SADM,EAEZ,MAAMA,SAFM,CAAd;AAIA,WAAOF,MAAP;AACD;;AAdmB;;AAAtBG","names":["TaskQueue","constructor","_chain","Promise","resolve","postTask","task","result","then","undefined","exports"],"sources":["../../../../src/common/TaskQueue.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}