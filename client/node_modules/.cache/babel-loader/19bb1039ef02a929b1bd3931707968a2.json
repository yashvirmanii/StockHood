{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BrowserWebSocketTransport = void 0;\n\nclass BrowserWebSocketTransport {\n  constructor(ws) {\n    this._ws = ws;\n\n    this._ws.addEventListener('message', event => {\n      if (this.onmessage) this.onmessage.call(null, event.data);\n    });\n\n    this._ws.addEventListener('close', () => {\n      if (this.onclose) this.onclose.call(null);\n    }); // Silently ignore all errors - we don't know what to do with them.\n\n\n    this._ws.addEventListener('error', () => {});\n\n    this.onmessage = null;\n    this.onclose = null;\n  }\n\n  static create(url) {\n    return new Promise((resolve, reject) => {\n      const ws = new WebSocket(url);\n      ws.addEventListener('open', () => resolve(new BrowserWebSocketTransport(ws)));\n      ws.addEventListener('error', reject);\n    });\n  }\n\n  send(message) {\n    this._ws.send(message);\n  }\n\n  close() {\n    this._ws.close();\n  }\n\n}\n\nexports.BrowserWebSocketTransport = BrowserWebSocketTransport;","map":{"version":3,"mappings":";;;;;;;AAiBA,MAAaA,yBAAb,CAAsC;AAgBpCC,cAAYC,EAAZ,EAAyB;AACvB,SAAKC,GAAL,GAAWD,EAAX;;AACA,SAAKC,GAAL,CAASC,gBAAT,CAA0B,SAA1B,EAAsCC,KAAD,IAAU;AAC7C,UAAI,KAAKC,SAAT,EAAoB,KAAKA,SAAL,CAAeC,IAAf,CAAoB,IAApB,EAA0BF,KAAK,CAACG,IAAhC;AACrB,KAFD;;AAGA,SAAKL,GAAL,CAASC,gBAAT,CAA0B,OAA1B,EAAmC,MAAK;AACtC,UAAI,KAAKK,OAAT,EAAkB,KAAKA,OAAL,CAAaF,IAAb,CAAkB,IAAlB;AACnB,KAFD,EALuB,CAQvB;;;AACA,SAAKJ,GAAL,CAASC,gBAAT,CAA0B,OAA1B,EAAmC,MAAK,CAAG,CAA3C;;AACA,SAAKE,SAAL,GAAiB,IAAjB;AACA,SAAKG,OAAL,GAAe,IAAf;AACD;;AA3BY,SAANC,MAAM,CAACC,GAAD,EAAY;AACvB,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAoB;AACrC,YAAMZ,EAAE,GAAG,IAAIa,SAAJ,CAAcJ,GAAd,CAAX;AAEAT,QAAE,CAACE,gBAAH,CAAoB,MAApB,EAA4B,MAC1BS,OAAO,CAAC,IAAIb,yBAAJ,CAA8BE,EAA9B,CAAD,CADT;AAGAA,QAAE,CAACE,gBAAH,CAAoB,OAApB,EAA6BU,MAA7B;AACD,KAPM,CAAP;AAQD;;AAoBDE,MAAI,CAACC,OAAD,EAAgB;AAClB,SAAKd,GAAL,CAASa,IAAT,CAAcC,OAAd;AACD;;AAEDC,OAAK;AACH,SAAKf,GAAL,CAASe,KAAT;AACD;;AApCmC;;AAAtCC","names":["BrowserWebSocketTransport","constructor","ws","_ws","addEventListener","event","onmessage","call","data","onclose","create","url","Promise","resolve","reject","WebSocket","send","message","close","exports"],"sources":["../../../../src/common/BrowserWebSocketTransport.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}